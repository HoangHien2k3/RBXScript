-- DE_Commands --
game:IsLoaded()
task.wait()

local Sea_1 = game:GetService("Workspace").Map:FindFirstChild("MobBoss")
local Sea_2 = game:GetService("Workspace").Map:FindFirstChild("GreenBit")
local Sea_3 = game:GetService("Workspace").Map:FindFirstChild("TikiOutpost")

local plrs, plr, cr, hm, hrp, hrp_pos, hm_health, ts, stg, rs
local tweencommands_table, tweenspeeds_table, teleport_instance_table
local twspeed, current_tw, pre_username
local paste_notify_title, error_notify_title, success_notify_title
local cancel_tween_screengui, cancel_tween_button, cancel_tween_button_ui

cancel_tween_screengui = Instance.new("ScreenGui")
cancel_tween_screengui.Name = "CancelTweenScript"
cancel_tween_screengui.Parent = game.CoreGui

cancel_tween_button = Instance.new("TextButton")
cancel_tween_button_ui = Instance.new("UICorner")

cancel_tween_button.Parent = cancel_tween_screengui
cancel_tween_button.BackgroundColor3 = Color3.new(0, 0, 0)
cancel_tween_button.BackgroundTransparency = 0.5
cancel_tween_button.Position = UDim2.new(0.84, 0, -0.1, 0)
cancel_tween_button.Size = UDim2.new(0.05, 0, 0.1, 0)
cancel_tween_button.TextScaled = true
cancel_tween_button.TextColor3 = Color3.new(1, 1, 1)
cancel_tween_button.Font = Enum.Font.Code
cancel_tween_button.Text = "Tweening: OFF"
cancel_tween_button.Visible = true

cancel_tween_button_ui.Parent = cancel_tween_button
cancel_tween_button_ui.CornerRadius = UDim.new(0, 10)

plrs = game:GetService("Players")
ts = game:GetService("TweenService")
stg = game:GetService("StarterGui")
rs = game:GetService("RunService")

plr = plrs.LocalPlayer
cr = plr.Character
hm = cr.Humanoid
hrp = cr.HumanoidRootPart
hrp_pos = hrp.Position
hm_health = hm.Health

twspeed = 250
current_tw = nil
pre_username = nil

paste_notify_title = "《Loaded Script》"
error_notify_title = "《Alert》"
success_notify_title = "《Success》"

tweencommands_table = {"-to", "-moveto", "-goto", "-flyto"}
tweenspeeds_table = {"-tspeed", "-tweenspeed"}
teleport_instance_table = {"-tp", "-teleport", "-transfer"}

function correct_username(plrs_name)
    for _, findplrs in ipairs(plrs:GetPlayers()) do
        if string.lower(findplrs.Name):sub(1, #plrs_name) == string.lower(plrs_name) or
        string.lower(findplrs.DisplayName):sub(1, #plrs_name) == string.lower(plrs_name) then
            return findplrs
        end
    end
    return nil
end

function ct_duration(spos, epos, spd)
    local di = (epos - spos).magnitude
    return di / spd
end

function ct_info(spos, epos)
    local dur = ct_duration(spos, epos, twspeed)
    return TweenInfo.new(dur, Enum.EasingStyle.Linear, Enum.EasingDirection.InOut)
end

function cancel_prtw()
    if current_tw then
        current_tw:Cancel()
    end
end

function clear_username_storage()
    current_tw = nil
    pre_username = nil
end

function ntf(title_ntf, text_ntf, dur_ntf)
    stg:SetCore("SendNotification", {
        Title = title_ntf,
        Text = text_ntf,
        Duration = dur_ntf,
    })
end

function paste(url)
    loadstring(game:HttpGet(url))()
    ntf(paste_notify_title, "Successfully Loaded Script from URL: " .. url, 2.5)
end

function tpto_instance(tp_user)
    if tp_user and tp_user.Character and tp_user.Character:FindFirstChild("HumanoidRootPart") then
        plr.Character:SetPrimaryPartCFrame(tp_user.Character.HumanoidRootPart.CFrame)
    else
        print("failed do -teleport to players, try again later.")
    end
end

function printplrs()
    for _, allplr in ipairs(plrs:GetPlayers()) do
        print(allplr.Name)
    end
end

function create_part(part_cframe, part_name)
    local epoint = Instance.new("Part")
    epoint.Parent = game.Workspace
    epoint.CFrame = part_cframe
    epoint.Size = Vector3.new(0.1, 0.1, 0.1)
    epoint.CanCollide = false
    epoint.Anchored = true
    epoint.Color = Color3.new(0, 1, 1)
    epoint.Transparency = 0.9
    epoint.Name = part_name
end

if Sea_1 then
    ntf("You're in First Sea", "World Detected: Starter Sea", 1.5)
elseif Sea_2 then
    ntf("You're in Second Sea", "World Detected: Second Sea", 1.5)
elseif Sea_3 then
    ntf("You're in Third Sea", "World Detected: Third Sea", 1.5)
    create_part(CFrame.new(-1096, 64, -14522), "EVS_Island")
else
    print("Error: failed to detecting Sea!")
end

function to_islands(IslandName, TH_eight)
    local island_x = game:GetService("Workspace"):FindFirstChild(IslandName)
    if island_x then
        local plr_pos = game:GetService("Players").LocalPlayer.Character.HumanoidRootPart.Position
        cancel_prtw()
        local goal_island = {CFrame = island_x.CFrame + TH_eight}
        local twi4_island = ct_info(plr_pos, goal_island.CFrame.Position)
        current_tw = ts:Create(game.Players.LocalPlayer.Character.HumanoidRootPart, twi4_island, goal_island)
        current_tw:Play()
    else
        ntf(error_notify_title, "Not found Islands, Failed to teleportation !", 1.5)
    end
end

local IsActivated = false
function DE_Commands(Aesthetic)
    local wis = string.split(Aesthetic, " ")
    if not IsActivated then
        IsActivated = true
        if table.find(tweencommands_table, wis[1]) then
            if #wis == 2 then
                local specifics_u = wis[2]
                local correct_specifics_u = correct_username(specifics_u)
                if correct_specifics_u then
                    local target_user = correct_specifics_u
                    local target_user_hrp = target_user.Character and target_user.Character:FindFirstChild("HumanoidRootPart")
                    if target_user_hrp then
                        local target_user_pos = target_user_hrp.Position + Vector3.new(0, 1, 0)
                        local plr_hrp = plr.Character:FindFirstChild("HumanoidRootPart")
                        if plr_hrp then
                            cancel_prtw()
                            pre_username = specifics_u
                            local dur2 = ct_duration(plr_hrp.Position, target_user_pos, twspeed)
                            local twi4 = TweenInfo.new(dur2, Enum.EasingStyle.Linear, Enum.EasingDirection.InOut)
                            local tw_goal = {CFrame = CFrame.new(target_user_pos)}
                            current_tw = ts:Create(plr_hrp, twi4, tw_goal)
                            ntf(success_notify_title, "Tweening Progress: now tweening to players [" .. correct_specifics_u.Name .. "]", 2)
                            current_tw:Play()
                            current_tw.Completed:Connect(clear_username_storage)
                        end
                    end
                end
            elseif #wis == 3 then
                if wis[2] == "?" then
                    print("Tweening Command Alliases: -to, -moveto, -goto, -flyto")
                    ntf(error_notify_title, "Current command alliases: -to, -moveto, -goto, -flyto", 2.5)
                end
            end
        elseif table.find(tweenspeeds_table, wis[1]) and wis[2] then
            local new_tspeed = wis[2]
            twspeed = new_tspeed
            ntf(success_notify_title, "Tweening Progress: tweening speed set " .. wis[2], 1.5)
            if wis[2] == "?" then
                print("Tweening Command Speed Alliases: -tspeed, -tweenspeed")
                ntf(error_notify_title, "Current command alliases: -tspeed, -tweenspeed", 2.5)
            end
        elseif table.find(teleport_instance_table, wis[1]) then
            if #wis == 2 then
                local match_user = wis[2]
                local correct_match_user = correct_username(match_user)
                if correct_match_user then
                    ntf(success_notify_title, "Instantly Teleport: teleport to players [" .. correct_match_user.Name .. "]", 2)
                    tpto_instance(correct_match_user)
                    game.Players.LocalPlayer.Character.Humanoid.Health = 0
                else
                    ntf(error_notify_title, "InCompleted: not found players [" .. wis[2] .. "]", 2)
                end
            elseif #wis == 3 then
                if wis[2] == "?" then
                    print("Teleport Instance Command Alliases: -tp, -teleport, -transfer")
                    ntf(error_notify_title, "Current command alliases: -tp, -teleport, -transfer", 2.5)
                end
            end
        elseif wis[1] == "-plr" then
            if #wis == 2 then
                if wis[2] == "list" then
                    printplrs()
                    if game:GetService("CoreGui"):FindFirstChild("DeveloperConsole") == nil then
                        game:GetService("StarterGui"):SetCore("DevConsoleVisible", true)
                    end
                end
            end
        elseif wis[1] == "-island" then
            if #wis == 2 then
                if wis[2] == "christmas" then
                    to_islands("EVS_Island", Vector3.new(0, 9, 0))
                end
            end
        elseif wis[1] == "-raid" then
            if #wis == 2 then
                if wis[2] == "awk" then
                    local args = {
                        [1] = "Awakener",
                        [2] = "Awaken"
                    }
                    
                    game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer(unpack(args))
                    ntf("Fruit Awakening", "Success awakening your fruit, if not then check your fragments!", 1.5)
                elseif wis[2] == "unawk" then
                    local args = {
                        [1] = "Awakener",
                        [2] = "Teleport"
                    }
                    
                    game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer(unpack(args))
                    ntf("Fruit Awakening", "Successfully teleport you back to previous place.", 1.5)
                end
            end
        elseif wis[1] == "-redz" then
            paste("https://raw.githubusercontent.com/NganHa2k3/Others/refs/heads/Creator/BloxFruits_ScriptHub_1")
            print("Loaded REDZ Script Hub by Creator 'realredz' this script not by me, i'm just put in here for quickly loaded script.")
        elseif wis[1] == "-dex" then
            paste("https://raw.githubusercontent.com/HoangHien2k3/MoonLight/refs/heads/main/Roblox_DexExplorer_4Mobile")
            print("Loaded Dex Explorer Script by Moon, make for inf yield edited by someone for mobile version... this is a backup saved!")
        elseif wis[1] == "-rspy" then
            paste("https://raw.githubusercontent.com/HoangHien2k3/MoonLight/refs/heads/main/Roblox_RemoteEvents_Spy")
            print("Loaded Remote Events Spy Script: this script use to catch remote events function... i guess it's what it call?")
        elseif wis[1] == "-infyield" then
            paste("https://raw.githubusercontent.com/EdgeIY/infiniteyield/master/source")
            print("Loaded Infinite Yield: a popular admin script!")
        elseif wis[1] == "-cmds" then
            print("List of all commands: -to [username/?], -tspeed [speed/?], -tp [username/?], -plr [list], -redz, -dex, -rspy, -infyield, -cmds")
            if game:GetService("CoreGui"):FindFirstChild("DeveloperConsole") == nil then
                game:GetService("StarterGui"):SetCore("DevConsoleVisible", true)
            end
        end
        IsActivated = false
    end
end

plr.Chatted:Connect(DE_Commands)
ntf("Blox Fruits Commands Script", "Make by HH2k3, alot useful commands 'type -cmds' to shown all commands!", 4)

plr.CharacterAdded:Connect(function()
    wait(2)
    if current_tw then
        current_tw:Cancel()
    end
    plr.Chatted:Connect(DE_Commands)
end)

local IsCurrent_Tw = false
rs.RenderStepped:Connect(function()
    if current_tw then
        IsCurrent_Tw = false
        cancel_tween_button.Text = "Tweening: ON"
        cancel_tween_button.TextColor3 = Color3.new(1, 1, 0)
    else
        if not IsCurrent_Tw then
            IsCurrent_Tw = true
            cancel_tween_button.Text = "Tweening: OFF"
            cancel_tween_button.TextColor3 = Color3.new(1, 1, 1)
        end
    end
end)

cancel_tween_button.MouseButton1Click:Connect(function()
    if current_tw then
        current_tw:Cancel()
        clear_username_storage()
    else
        ntf(error_notify_title, "Tweening Progress: currently not tweening to anywhere can't toggled!", 1.5)
    end
end)
