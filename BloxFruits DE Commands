-- DE_Commands --
game:IsLoaded()
task.wait()
print("◇HH2K3: Script Loaded!")

local Sea_1 = game:GetService("Workspace").Map:FindFirstChild("MobBoss")
local Sea_2 = game:GetService("Workspace").Map:FindFirstChild("GreenBit")
local Sea_3 = game:GetService("Workspace").Map:FindFirstChild("TikiOutpost")

local plrs, plr, cr, hm, hrp, hrp_pos, hm_health, ts, stg, rs
local tweencommands_table, tweenspeeds_table, teleport_instance_table
local twspeed, current_tw, pre_username
local paste_notify_title, error_notify_title, success_notify_title
local cancel_tween_screengui, cancel_tween_button, cancel_tween_button_ui

cancel_tween_screengui = Instance.new("ScreenGui")
cancel_tween_screengui.Name = "CancelTweenScript"
cancel_tween_screengui.Parent = game.CoreGui

cancel_tween_button = Instance.new("TextButton")
cancel_tween_button_ui = Instance.new("UICorner")

cancel_tween_button.Parent = cancel_tween_screengui
cancel_tween_button.BackgroundColor3 = Color3.new(0, 0, 0)
cancel_tween_button.BackgroundTransparency = 0.5
cancel_tween_button.Position = UDim2.new(0.84, 0, -0.1, 0)
cancel_tween_button.Size = UDim2.new(0.05, 0, 0.1, 0)
cancel_tween_button.TextScaled = true
cancel_tween_button.TextColor3 = Color3.new(1, 1, 1)
cancel_tween_button.Font = Enum.Font.Code
cancel_tween_button.Text = "Tweening: OFF"
cancel_tween_button.Visible = true

cancel_tween_button_ui.Parent = cancel_tween_button
cancel_tween_button_ui.CornerRadius = UDim.new(0, 10)

plrs = game:GetService("Players")
ts = game:GetService("TweenService")
stg = game:GetService("StarterGui")
rs = game:GetService("RunService")

plr = plrs.LocalPlayer
cr = plr.Character
hm = cr.Humanoid
hrp = cr.HumanoidRootPart
hrp_pos = hrp.Position
hm_health = hm.Health

twspeed = 250
current_tw = nil
pre_username = nil

paste_notify_title = "《Loaded Script》"
error_notify_title = "《Alert》"
success_notify_title = "《Success》"

tweencommands_table = {"-to", "-moveto", "-goto", "-flyto"}
tweenspeeds_table = {"-tspeed", "-tweenspeed"}
teleport_instance_table = {"-tp", "-teleport", "-transfer"}

function correct_username(plrs_name)
    for _, findplrs in ipairs(plrs:GetPlayers()) do
        if string.lower(findplrs.Name):sub(1, #plrs_name) == string.lower(plrs_name) or
        string.lower(findplrs.DisplayName):sub(1, #plrs_name) == string.lower(plrs_name) then
            return findplrs
        end
    end
    return nil
end

function ct_duration(spos, epos, spd)
    local di = (epos - spos).magnitude
    return di / spd
end

function ct_info(spos, epos)
    local dur = ct_duration(spos, epos, twspeed)
    return TweenInfo.new(dur, Enum.EasingStyle.Linear, Enum.EasingDirection.InOut)
end

function cancel_prtw()
    if current_tw then
        current_tw:Cancel()
    end
end

function clear_username_storage()
    current_tw = nil
    pre_username = nil
end

function ntf(title_ntf, text_ntf, dur_ntf)
    stg:SetCore("SendNotification", {
        Title = title_ntf,
        Text = text_ntf,
        Duration = dur_ntf,
    })
end

function paste(url)
    loadstring(game:HttpGet(url))()
    ntf(paste_notify_title, "Successfully Loaded Script from URL: " .. url, 2.5)
end

function paste_no_notify(url)
    loadstring(game:HttpGet(url))()
    print("Loaded Script: " .. url)
end

function tpto_instance(tp_user)
    if tp_user and tp_user.Character and tp_user.Character:FindFirstChild("HumanoidRootPart") then
        plr.Character:SetPrimaryPartCFrame(tp_user.Character.HumanoidRootPart.CFrame)
    else
        print("failed do -teleport to players, try again later.")
    end
end

function printplrs()
    for _, allplr in ipairs(plrs:GetPlayers()) do
        print(allplr.Name)
    end
end

function opendevconsole()
    if game:GetService("CoreGui"):FindFirstChild("DeveloperConsole") == nil then
        game:GetService("StarterGui"):SetCore("DevConsoleVisible", true)
    end
end

function buyallhaki()
    local args = {
    [1] = "BuyHaki",
    [2] = "Soru"
}

game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer(unpack(args))
wait(1)
local args = {
    [1] = "BuyHaki",
    [2] = "Soru"
}

game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer(unpack(args))
wait(1)
local args = {
    [1] = "BuyHaki",
    [2] = "Soru"
}

game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer(unpack(args))
wait(1)
local args = {
    [1] = "KenTalk",
    [2] = "Buy"
}

game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer(unpack(args))
ntf(success_notify_title, "Successfully bought all haki ability if not it mean your beli/money, for ken haki type '-saber' to do get it!", 2)
end

function purchaseditem(iName)
    local args = {
    [1] = "BuyItem",
    [2] = iName
}

game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer(unpack(args))
ntf(success_notify_title, "You've bought a " .. iName, 1.5)
end

function create_part(part_cframe, part_name)
    local epoint = Instance.new("Part")
    epoint.Parent = game.Workspace
    epoint.CFrame = part_cframe
    epoint.Size = Vector3.new(0.1, 0.1, 0.1)
    epoint.CanCollide = false
    epoint.Anchored = true
    epoint.Color = Color3.new(0, 1, 1)
    epoint.Transparency = 0.9
    epoint.Name = part_name
end

if Sea_1 then
    ntf("You're in First Sea", "World Detected: Starter Sea", 1.5)
    create_part(CFrame.new(1550, 57, -2983), "ChristmasEvents_Island")
    create_part(CFrame.new(-2867, 400, 2128), "MarineStarter_Island")
    create_part(CFrame.new(1064, 400, 1443), "PirateStarter_Island")
    create_part(CFrame.new(-798, 400, 1605), "MiddleTown_Island")
    create_part(CFrame.new(-1442, 400, 20), "Jungle_Island")
    create_part(CFrame.new(-1127, 400, 4052), "PiratesVillage_Island")
    create_part(CFrame.new(1077, 400, 4371), "Desert_Island")
    create_part(CFrame.new(1300, 400, -1376), "Snowy_Island")
    create_part(CFrame.new(-5044, 400, 4326), "MarineFord_Island")
    create_part(CFrame.new(-1690, 400, -3145), "Arena_Island")
    create_part(CFrame.new(5214, 400, 734), "Prison_Island")
    create_part(CFrame.new(-5616, 400, 8754), "MagmaVillage_Island")
    create_part(CFrame.new(5668, 580, 4301), "Fountain_Island")
    create_part(CFrame.new(4047, 400, -1816), "Underwater_Island")
    create_part(CFrame.new(-4692, 1020, -1887), "LowerSky_Island")
    create_part(CFrame.new(-7965, 6050, -1401), "HighestSky_Island")
elseif Sea_2 then
    ntf("You're in Second Sea", "World Detected: Second Sea", 1.5)
elseif Sea_3 then
    ntf("You're in Third Sea", "World Detected: Third Sea", 1.5)
    create_part(CFrame.new(-1096, 64, -14522), "ChristmasEvents_Island")
else
    print("Error: failed to detecting Sea!")
end

function to_islands(IslandName, TH_eight)
    local island_x = game:GetService("Workspace"):FindFirstChild(IslandName)
    if island_x then
        local plr_pos = game:GetService("Players").LocalPlayer.Character.HumanoidRootPart.Position
        cancel_prtw()
        local goal_island = {CFrame = island_x.CFrame + TH_eight}
        local twi4_island = ct_info(plr_pos, goal_island.CFrame.Position)
        current_tw = ts:Create(game.Players.LocalPlayer.Character.HumanoidRootPart, twi4_island, goal_island)
        current_tw:Play()
    else
        ntf(error_notify_title, "Not found Islands, Failed to teleportation !", 1.5)
    end
end

local IsActivated = false
function DE_Commands(Aesthetic)
    local wis = string.split(Aesthetic, " ")
    if not IsActivated then
        IsActivated = true
        if table.find(tweencommands_table, wis[1]) then
            if #wis == 2 then
                local specifics_u = wis[2]
                local correct_specifics_u = correct_username(specifics_u)
                if correct_specifics_u then
                    local target_user = correct_specifics_u
                    local target_user_hrp = target_user.Character and target_user.Character:FindFirstChild("HumanoidRootPart")
                    if target_user_hrp then
                        local target_user_pos = target_user_hrp.Position + Vector3.new(0, 1, 0)
                        local plr_hrp = plr.Character:FindFirstChild("HumanoidRootPart")
                        if plr_hrp then
                            cancel_prtw()
                            pre_username = specifics_u
                            local dur2 = ct_duration(plr_hrp.Position, target_user_pos, twspeed)
                            local twi4 = TweenInfo.new(dur2, Enum.EasingStyle.Linear, Enum.EasingDirection.InOut)
                            local tw_goal = {CFrame = CFrame.new(target_user_pos)}
                            current_tw = ts:Create(plr_hrp, twi4, tw_goal)
                            ntf(success_notify_title, "Tweening Progress: now tweening to players [" .. correct_specifics_u.Name .. "]", 2)
                            current_tw:Play()
                            current_tw.Completed:Connect(clear_username_storage)
                        end
                    end
                end
            elseif #wis == 3 then
                if wis[2] == "?" then
                    print("Tweening Command Alliases: -to, -moveto, -goto, -flyto")
                    ntf(error_notify_title, "Current command alliases: -to, -moveto, -goto, -flyto", 2.5)
                end
            end
        elseif table.find(tweenspeeds_table, wis[1]) and wis[2] then
            local new_tspeed = wis[2]
            twspeed = new_tspeed
            ntf(success_notify_title, "Tweening Progress: tweening speed set " .. wis[2], 1.5)
            if wis[2] == "?" then
                print("Tweening Command Speed Alliases: -tspeed, -tweenspeed")
                ntf(error_notify_title, "Current command alliases: -tspeed, -tweenspeed", 2.5)
            end
        elseif table.find(teleport_instance_table, wis[1]) then
            if #wis == 2 then
                local match_user = wis[2]
                local correct_match_user = correct_username(match_user)
                if correct_match_user then
                    ntf(success_notify_title, "Instantly Teleport: teleport to players [" .. correct_match_user.Name .. "]", 2)
                    tpto_instance(correct_match_user)
                    game.Players.LocalPlayer.Character.Humanoid.Health = 0
                else
                    ntf(error_notify_title, "InCompleted: not found players [" .. wis[2] .. "]", 2)
                end
            elseif #wis == 3 then
                if wis[2] == "?" then
                    print("Teleport Instance Command Alliases: -tp, -teleport, -transfer")
                    ntf(error_notify_title, "Current command alliases: -tp, -teleport, -transfer", 2.5)
                end
            end
        elseif wis[1] == "-plr" then
            if #wis == 2 then
                if wis[2] == "list" then
                    printplrs()
                    opendevconsole()
                end
            end
        elseif wis[1] == "-island" then
            if #wis == 2 then
                if wis[2] == "christmas" then
                    to_islands("ChristmasEvents_Island", Vector3.new(0, 9, 0))
                elseif wis[2] == "marinestarter" or wis[2] == "ms" then
                    to_islands("MarineStarter_Island", Vector3.new(0, 9, 0))
                elseif wis[2] == "piratestarter" or wis[2] == "ps" then
                    to_islands("PirateStarter_Island", Vector3.new(0, 9, 0))
                elseif wis[2] == "middletown" or wis[2] == "mt" then
                    to_islands("MiddleTown_Island", Vector3.new(0, 9, 0))
                elseif wis[2] == "jungle" or wis[2] == "j" then
                    to_islands("Jungle_Island", Vector3.new(0, 9, 0))
                elseif wis[2] == "piratevillage" or wis[2] == "pv" then
                    to_islands("PiratesVillage_Island", Vector3.new(0, 9, 0))
                elseif wis[2] == "desert" or wis[2] == "d" then
                    to_islands("Desert_Island", Vector3.new(0, 9, 0))
                elseif wis[2] == "snowy" or wis[2] == "s" then
                    to_islands("Snowy_Island", Vector3.new(0, 9, 0))
                elseif wis[2] == "marineford" or wis[2] == "mf" then
                    to_islands("MarineFord_Island", Vector3.new(0, 9, 0))
                elseif wis[2] == "arena" or wis[2] == "a" then
                    to_islands("Arena_Island", Vector3.new(0, 9, 0))
                elseif wis[2] == "prison" or wis[2] == "p" then
                    to_islands("Prison_Island", Vector3.new(0, 9, 0))
                elseif wis[2] == "magmavillage" or wis[2] == "mv" then
                    to_islands("MagmaVillage_Island", Vector3.new(0, 9, 0))
                elseif wis[2] == "fountain" or wis[2] == "f" then
                    to_islands("Fountain_Island", Vector3.new(0, 9, 0))
                elseif wis[2] == "underwater" or wis[2] == "uw" then
                    to_islands("Underwater_Island", Vector3.new(0, 9, 0))
                elseif wis[2] == "lowersky" or wis[2] == "ls" then
                    to_islands("LowerSky_Island", Vector3.new(0, 9, 0))
                elseif wis[2] == "highersky" or wis[2] == "hs" then
                    to_islands("HighestSky_Island", Vector3.new(0, 9, 0))
                elseif wis[2] == "?" then
                    if Sea_1 then
                        print("List of all island name, do '-island' with these name for teleportation: ms, ps, mt, j, pv, d, s, mf, a, p, mv, f, uw, ls, hs or ? for shown command info...")
                        print("Others way or name of the island for teleportation: marinestarter, piratestarter, middletown, jungle, piratevillage, desert, snowy, marineford, arena, prison, magmavillage, fountain, underwater, lowersky, highersky. That's all !")
                        opendevconsole()
                    elseif Sea_2 then
                        print("Nothing for now")
                    elseif Sea_3 then
                        print("Nothing for now")
                    else
                        print("Can't know what is your Sea World!")
                    end
                end
            end
        elseif wis[1] == "-raid" then
            if #wis == 2 then
                if wis[2] == "awk" then
                    local args = {
                        [1] = "Awakener",
                        [2] = "Awaken"
                    }
                    
                    game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer(unpack(args))
                    ntf("Fruit Awakening", "Success awakening your fruit, if not then check your fragments!", 1.5)
                elseif wis[2] == "unawk" then
                    local args = {
                        [1] = "Awakener",
                        [2] = "Teleport"
                    }
                    
                    game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer(unpack(args))
                    ntf("Fruit Awakening", "Successfully teleport you back to previous place.", 1.5)
                end
            end
        elseif wis[1] == "-random" then
            if #wis == 2 then
                if wis[2] == "fruit" or wis[2] == "f" then
                    local args = {
                        [1] = "Cousin",
                        [2] = "Buy"
                    }
                    
                    game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer(unpack(args))
                    ntf(success_notify_title, "You've rolled a fruit, check it in your inventory if not then look at your beli!", 2)
                end
            end
        elseif wis[1] == "-buy" then
            if #wis == 2 then
                if wis[2] == "haki" then
                    buyallhaki()
                elseif wis[2] == "?" then
                    print("List of -buy command: any item name u know!")
                    opendevconsole()
                end
            elseif #wis == 3 then
                local in4_iName = table.concat(wis, " ", 2)
                purchaseditem(in4_iName)
            end
        elseif wis[1] == "-melee" or wis[1] == "-m" then
            if #wis == 2 then
                if wis[2] == "darkleg" or wis[2] == "1" then
                    local args = {
                        [1] = "BuyBlackLeg"
                    }
                    
                    game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer(unpack(args))
                elseif wis[2] == "electro" or wis[2] == "2" then
                    local args = {
                        [1] = "BuyElectro"
                    }
                    
                    game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer(unpack(args))
                elseif wis[2] == "fishman" or wis[2] == "3" then
                    local args = {
                        [1] = "BuyFishmanKarate"
                    }
                    
                    game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer(unpack(args))
                elseif wis[2] == "dragonbreath" or wis[2] == "4" then
                    local args = {
                        [1] = "BuyDragonBreath"
                    }
                    
                    game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer(unpack(args))
                elseif wis[2] == "superhuman" or wis[2] == "5" then
                    local args = {
                        [1] = "BuySuperhuman"
                    }
                    
                    game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer(unpack(args))
                elseif wis[2] == "?" then
                    print("ALL Fighting Style name: darkleg, electro, fishman, dragonbreath, superhuman")
                    print("Others way: 1, 2, 3, 4, 5...")
                    opendevconsole()
                end
            end
        elseif wis[1] == "-team" then
            if #wis == 2 then
                if wis[2] == "pirates" or wis[2] == "p" then
                    local args = {
                        [1] = "SetTeam",
                        [2] = "Pirates"
                    }
                    
                    game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer(unpack(args))
                    ntf(success_notify_title, "Joined Team Pirates !", 1.2)
                elseif wis[2] == "marines" or wis[2] == "m" then
                    local args = {
                        [1] = "SetTeam",
                        [2] = "Marines"
                    }
                    
                    game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer(unpack(args))
                    ntf(success_notify_title, "Joined Team Marines !", 1.2)
                end
            end
        elseif wis[1] == "-refunds" then
            local args = {
                [1] = "BlackbeardReward",
                [2] = "Refund",
                [3] = "2"
            }
            
            game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer(unpack(args))
            ntf(success_notify_title, "Reset Stat !", 1.5)
        elseif wis[1] == "-reroll" and wis[2] == "race" then
            local args = {
                [1] = "BlackbeardReward",
                [2] = "Reroll",
                [3] = "2"
            }
            
            game:GetService("ReplicatedStorage").Remotes.CommF_:InvokeServer(unpack(args))
            ntf(success_notify_title, "Race Changed To: IDK", 1.5)
        elseif wis[1] == "-chestfarm" or wis[1] == "-c" then
            paste("https://raw.githubusercontent.com/NganHa2k3/Tensura/refs/heads/main/BloxFruits_Update_Dragon_ChestFarm_V001")
            print("Chest Farm Activated, Reset Character or Died to Deactivated!")
        elseif wis[1] == "-serverhop" or wis[1] == "-sh" then
            paste_no_notify("https://raw.githubusercontent.com/HoangHien2k3/RBXScript_AR/refs/heads/main/serverhop")
            ntf("Server Hopping", "Wait for it...", 1.5)
        elseif wis[1] == "-rejoin" or wis[1] == "-rj" then
            paste_no_notify("https://raw.githubusercontent.com/HoangHien2k3/RBXScript_AR/refs/heads/main/rejoining")
            ntf("Rejoining In", "Wait a moment...", 1.5)
        elseif wis[1] == "-redz" then
            paste("https://raw.githubusercontent.com/NganHa2k3/Others/refs/heads/Creator/BloxFruits_ScriptHub_1")
            print("Loaded REDZ Script Hub by Creator 'realredz' this script not by me, i'm just put in here for quickly loaded script.")
        elseif wis[1] == "-dex" then
            paste("https://raw.githubusercontent.com/HoangHien2k3/MoonLight/refs/heads/main/Roblox_DexExplorer_4Mobile")
            print("Loaded Dex Explorer Script by Moon, make for inf yield edited by someone for mobile version... this is a backup saved!")
        elseif wis[1] == "-rspy" then
            paste("https://raw.githubusercontent.com/HoangHien2k3/MoonLight/refs/heads/main/Roblox_RemoteEvents_Spy")
            print("Loaded Remote Events Spy Script: this script use to catch remote events function... i guess it's what it call?")
        elseif wis[1] == "-infyield" then
            paste("https://raw.githubusercontent.com/EdgeIY/infiniteyield/master/source")
            print("Loaded Infinite Yield: a popular admin script!")
        elseif wis[1] == "-cmds" then
            print("List of all commands: -to, -moveto, -goto, -flyto [username/?], -tspeed, -tweenspeed [value/?], -tp, -teleport, -transfer [username/?], -plr [list], -island [island/?], -raid [awk/unawk], -random [fruit/f], -buy [haki/?], -melee, -m [1, 2, 3, 4, 5, 6.../?], -team [marines/pirates], -refunds, -reroll [race], -chestfarm, -c, -serverhop, -sh, -rj, -rejoin, -redz, -dex, -rspy, -infyield, -cmds and more in future, idk !")
            opendevconsole()
        end
        IsActivated = false
    end
end

plr.Chatted:Connect(DE_Commands)
ntf("Blox Fruits Commands Script", "Make by HH2k3, alot useful commands 'type -cmds' to shown all commands!", 4)

plr.CharacterAdded:Connect(function()
    wait(2)
    if current_tw then
        current_tw:Cancel()
    end
    plr.Chatted:Connect(DE_Commands)
end)

local IsCurrent_Tw = false
rs.RenderStepped:Connect(function()
    if current_tw then
        IsCurrent_Tw = false
        cancel_tween_button.Text = "Tweening: ON"
        cancel_tween_button.TextColor3 = Color3.new(1, 1, 0)
    else
        if not IsCurrent_Tw then
            IsCurrent_Tw = true
            cancel_tween_button.Text = "Tweening: OFF"
            cancel_tween_button.TextColor3 = Color3.new(1, 1, 1)
        end
    end
end)

cancel_tween_button.MouseButton1Click:Connect(function()
    if current_tw then
        current_tw:Cancel()
        clear_username_storage()
    else
        ntf(error_notify_title, "Tweening Progress: currently not tweening to anywhere can't toggled!", 1.5)
    end
end)

paste_no_notify("https://raw.githubusercontent.com/HoangHien2k3/RBXScript_AR/refs/heads/main/KeepScript")

if _G.ExecuteScriptAfterTeleport then
    _G.ExecuteScriptAfterTeleport("loadstring(game:HttpGet('https://raw.githubusercontent.com/HoangHien2k3/RBXScript/refs/heads/Place/BloxFruits%20DE%20Commands'))()")
else
    ntf(error_notify_title, "Can't re-executing script after rejoining or server hop !", 2.5)
end
